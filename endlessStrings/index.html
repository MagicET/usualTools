<!doctype html>

<html lang="ja">
<head>
  <meta charset="utf-8">

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@500;700&family=Zen+Maru+Gothic:wght@500;700&display=swap" rel="stylesheet">
  
  <title>無限文字列</title>

  <style>
    body {
      font-family: 'Nunito', 'Zen Maru Gothic', sans-serif;
      color: dimgray;
    }
    #output {
      width = 200%;
      height = 75px;
    }
  </style>
  
</head>

<body>
  <iframe src="https://magicet.github.io/usualTools/header.html"></iframe>
  <h2>無限文字列 by Tabuchi<h2>
  <label for "inputLength">長さ:<label>
  <input type="number" id="inputLength" placeholder="長さを入力"><br>
  <label for "inputCharacter">使用する文字:<label>
  <input type="text" id="inputCharacter" placeholder="使用する文字を入力"><br>
  <button id="createButton" onClick="createString()">作成</button><br>
  <textarea id="output">エラー</textarea><button onClick="copy()">コピー</button>
  
  <script>
    var length = document.getElementById("inputLength");
    var character = document.getElementById("inputCharacter");
    const button = document.getElementById("createButton");
    var output = document.getElementById("output");
    let clientHeight = output.clientHeight;
    output.value = "ここに結果を表示";
    var string = "";
    function createString() {
      string = "";
      for (var step = 0; step < Number(length.value); step++) {
        string = string + character.value.substr(Math.floor(Math.random() * character.value.length),1);
      }
      output.value = string;
      //textareaの要素の高さを設定（rows属性で行を指定するなら「px」ではなく「auto」で良いかも！）
      output.style.height = clientHeight + 'px';
      //textareaの入力内容の高さを取得
      let scrollHeight = output.scrollHeight;
      //textareaの高さに入力内容の高さを設定
      output.style.height = scrollHeight + 'px';
    }
    function copy() {
      output.focus();
      output.select();
      document.execCommand("copy");
      alert("コピーしました")
    }

    //textareaのinputイベント
    output.addEventListener('input', ()=>{
      //textareaの要素の高さを設定（rows属性で行を指定するなら「px」ではなく「auto」で良いかも！）
      output.style.height = clientHeight + 'px';
      //textareaの入力内容の高さを取得
      let scrollHeight = output.scrollHeight;
      //textareaの高さに入力内容の高さを設定
      output.style.height = scrollHeight + 'px';
    });
  </script>
</body>
</html>

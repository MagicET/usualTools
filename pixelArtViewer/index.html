<!doctype html>

<html lang="ja">

	<head>
    	<meta charset="utf-8">

  		<title>Image Viewer</title>

		<style>
            
    		img {
        		width: 100%;
				image-rendering: pixelated;
        	}
            
        	input[type="file"] {
            	display: none;
        	}
  		</style>
	</head>

 	<body>
    <p id="p">Hello</p>
		<label>
			<img src="./placeholder.png" id="image">
        	<input type="file" accept="image/png, image/jpeg" id="input" />
    	</label>
        
        <script>
            // 1. ファイル選択後に呼ばれるイベント
					document.getElementById("input").addEventListener('change', (event) => {
 						const p = document.getElementById("p");
          	p.innerHTML = "event fired";
          
          	if (!event.target.files[0]) {
              p.innerHTML = "file missing";
              return;
            }

    				// 2. 画像ファイルの読み込みクラス
    				const reader = new FileReader();

    				// 3. 準備が終わったら、id=sample1のsrc属性に選択した画像ファイルの情報を設定
    				reader.onload = (event) => {
        			document.getElementById("image").src = event.target.result;
    				}

    				// 4. 読み込んだ画像ファイルをURLに変換
    				reader.readAsDataURL(event.target.files[0]);
            
            p.innerHTML = "event ended correctly";
					})
    	</script>
 	</body>
</html>
